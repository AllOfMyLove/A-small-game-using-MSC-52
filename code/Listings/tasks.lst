C51 COMPILER V9.52.0.0   TASKS                                                             04/23/2020 15:25:35 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE TASKS
OBJECT MODULE PLACED IN .\keilOut\tasks.obj
COMPILER INVOKED BY: C:\Program Files\Keil\C51\BIN\C51.EXE src\tasks.c OMF2 ROM(SMALL) OPTIMIZE(8,SIZE) BROWSE INCDIR(.\
                    -dependence;.\src) DEBUG PRINT(.\Listings\tasks.lst) OBJECT(.\keilOut\tasks.obj)

line level    source

   1          #include "reg52.h"
   2          #include "LCD_func.h"
   3          #include "keyboard_func.h"
   4          #include "interrupt_func.h"
   5          #include "random_func.h"
   6          #define uchar unsigned char
   7          extern void uptate(void);
   8          extern uchar score;
   9          
  10          
  11          // 延时函数
  12          void delay500ms(void)
  13          {
  14   1          unsigned char a,b,c;
  15   1          for(c=23;c>0;c--)
  16   1              for(b=152;b>0;b--)
  17   1                  for(a=70;a>0;a--);
  18   1      }
  19          
  20          
  21          /***********************
  22                 暂停与继续
  23          ***********************/
  24          bit is_pause = 0;
  25          
  26          // INT1 中断，手动设置低优先级
  27          void pause() interrupt 2
  28          {
  29   1          P0 = 0x00;
  30   1          is_pause = 1;
  31   1          clear_LCD(0);
  32   1          display_LCD(0x80,"   PAUSE");
  33   1          init_random(TL1);
  34   1          while(is_pause);
  35   1      }
  36          
  37          // INT0 中断，手动设置高优先级
  38          void continuee() interrupt 0
  39          {
  40   1          if (is_pause == 0)
  41   1              return;
  42   1          clear_LCD(0);
  43   1          display_LCD(0x80,"CONTINUE");
  44   1          delay500ms();
  45   1          display_LCD(0x80,"Score:     ");
  46   1          display_LCD(0xC2,uchar2string(score));
  47   1          is_pause = 0;   // 退出pause中断
  48   1      }
  49          
  50          
  51          /***********************
  52                 正常运行
  53          ***********************/
  54          uchar count = 0;
C51 COMPILER V9.52.0.0   TASKS                                                             04/23/2020 15:25:35 PAGE 2   

  55          
  56          // 正常情况每秒钟更新
  57          void TIM_0_isr() interrupt 1
  58          {
  59   1          TH0 = (65536 - 50000) / 256;
  60   1          TL0 = (65536 - 50000) % 256;
  61   1          count++;
  62   1          if (count==10)
  63   1          {
  64   2              count = 0;
  65   2              update();
*** WARNING C206 IN LINE 65 OF src\tasks.c: 'update': missing function-prototype
  66   2          }
  67   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    270    ----
   CONSTANT SIZE    =     30    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
